---
import Price from '@/components/ui/Price.astro';
import Badge from '@/components/ui/Badge.astro';
import Button from '@/components/ui/Button.astro';
import Divider from '@/components/ui/Divider.astro';
import ProductImages from './ProductImages.astro';
import type { ProductData } from '@/types';

interface Props {
  product: ProductData;
  categoryName?: string;
}

const { product, categoryName } = Astro.props;
---

<div class="grid lg:grid-cols-2 gap-8 lg:gap-12">
  <!-- Images -->
  <ProductImages images={product.images} productName={product.name} />

  <!-- Info -->
  <div class="space-y-6">
    <!-- Category & Badge -->
    <div class="flex items-center gap-3">
      {
        categoryName && (
          <span class="text-sm text-pink-500 uppercase tracking-wider">
            {categoryName}
          </span>
        )
      }
      {product.featured && <Badge variant="new">Nổi bật</Badge>}
      {product.originalPrice && <Badge variant="sale">Sale</Badge>}
    </div>

    <!-- Name -->
    <h1
      class="text-2xl lg:text-3xl font-medium text-stone-800 leading-tight"
    >
      {product.name}
    </h1>

    <!-- Price -->
    <Price
      amount={product.price}
      originalAmount={product.originalPrice}
      class="text-xl"
    />

    <Divider variant="line" />

    <!-- Description -->
    <div class="prose prose-stone max-w-none">
      <p class="text-stone-600 leading-relaxed">{product.description}</p>
    </div>

    <!-- Contact Button -->
    <div class="space-y-3">
      <Button variant="primary" size="lg" href="/contact" class="w-full sm:w-auto">
        Liên hệ đặt hàng
      </Button>
      <p class="text-sm text-stone-400">
        Hoặc gọi hotline: <a
          href="tel:+84xxxxxxxxx"
          class="text-pink-500 hover:underline">+84 xxx xxx xxx</a
        >
      </p>
    </div>

    <Divider variant="line" />

    <!-- Specifications -->
    {
      product.specifications && Object.keys(product.specifications).length > 0 && (
        <div>
          <h3 class="font-medium text-stone-700 mb-3">Thông số sản phẩm</h3>
          <dl class="grid grid-cols-2 gap-2 text-sm">
            {Object.entries(product.specifications).map(([key, value]) => (
              <>
                <dt class="text-stone-500">{key}</dt>
                <dd class="text-stone-700">{value}</dd>
              </>
            ))}
          </dl>
        </div>
      )
    }

    <!-- Tags -->
    {
      product.tags && product.tags.length > 0 && (
        <div class="flex flex-wrap gap-2">
          {product.tags.map((tag) => (
            <span class="px-3 py-1 bg-stone-100 text-stone-500 text-xs rounded-full">
              {tag}
            </span>
          ))}
        </div>
      )
    }
  </div>
</div>
